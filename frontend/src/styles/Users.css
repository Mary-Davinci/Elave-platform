/* =======================
   Theme & Resets
======================== */
:root{
  --brand-700:#006a4e;
  --brand-600:#087257;
  --brand-500:#12856a;
  --brand-400:#1a9f7d;
  --ink-900:#1f2937;
  --ink-700:#374151;
  --ink-600:#4b5563;
  --ink-500:#6b7280;
  --muted-200:#e5e7eb;
  --muted-100:#f3f4f6;
  --surface:#ffffff;
  --danger:#dc3545;
  --danger-700:#c82333;
  --warn:#ffc107;
  --warn-ink:#856404;
  --success:#28a745;
  --success-ink:#155724;

  --radius:10px;
  --shadow-sm:0 1px 3px rgba(0,0,0,.08);
  --shadow-md:0 6px 14px rgba(0,0,0,.08);
}

/* Container & header */
.users-container{
  max-width:1200px;
  margin:0 auto;
  padding:24px;
}

.page-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:16px;
}
.page-header h1{
  font-size:28px;
  color:var(--ink-900);
  margin:0;
  letter-spacing:.2px;
}

.role-info .current-role{
  background:rgba(102,126,234,.08);
  color:#667eea;
  padding:8px 14px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
  border:1px solid rgba(102,126,234,.25);
}

/* Tabs */
.tabs{
  display:flex;
  gap:6px;
  border-bottom:1px solid var(--muted-200);
  margin-bottom:18px;
}
.tab{
  position:relative;
  padding:12px 16px;
  border:none;
  background:none;
  font-size:15px;
  font-weight:600;
  color:var(--ink-600);
  cursor:pointer;
  transition:color .2s ease;
  border-bottom:2px solid transparent;
}
.tab .icon{margin-right:6px;font-size:14px}
.tab:hover{color:var(--brand-600)}
.tab.active{
  color:var(--brand-700);
  border-bottom-color:var(--brand-700);
}
.tab--pending .tab-badge{
  margin-left:8px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:22px;
  height:20px;
  padding:0 6px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
  color:#fff;
  background:linear-gradient(135deg,#ff9f43 0%,#ff6f00 100%);
}

/* Filters */
.filters{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:8px 0 12px;
}
.search{flex:1;max-width:420px}
.search-input{
  width:100%;
  padding:10px 12px;
  border:1px solid var(--muted-200);
  border-radius:8px;
  font-size:14px;
  transition:border-color .2s ease, box-shadow .2s ease;
  background:#fff;
}
.search-input:focus{
  border-color:var(--brand-500);
  outline:none;
  box-shadow:0 0 0 3px rgba(18,133,106,.12);
}

/* Table wrapper + sticky header */
.table-scroll{
  background:var(--surface);
  border-radius:12px;
  box-shadow:var(--shadow-sm);
  overflow:auto;
  border:1px solid var(--muted-200);
  max-height:70vh;
}

.users-table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  background:var(--surface);
}
.users-table thead th{
  position:sticky;
  top:0;
  z-index:1;
  background:linear-gradient(135deg,#667eea 0%, #764ba2 100%);
  color:#fff;
  text-transform:uppercase;
  font-size:11px;
  letter-spacing:.5px;
  padding:12px 14px;
}
.users-table th:first-child{border-top-left-radius:12px}
.users-table th:last-child{border-top-right-radius:12px}

.users-table td{
  padding:12px 14px;
  border-bottom:1px solid var(--muted-200);
  vertical-align:middle;
  font-size:13px;
  color:var(--ink-700);
}
.users-table tr:last-child td{border-bottom:none}
.users-table tbody tr:hover{background:var(--muted-100)}

/* Actions */
.actions{
  display:flex;
  gap:8px;
  justify-content:center;
}
.edit-button,
.delete-button{
  background:#fff;
  border:1px solid var(--muted-200);
  font-size:16px;
  cursor:pointer;
  width:34px;
  height:34px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:8px;
  transition:background-color .2s, box-shadow .2s, transform .06s;
}
.edit-button:hover{
  background:rgba(0,106,78,.08);
  box-shadow:0 0 0 3px rgba(0,106,78,.1);
}
.delete-button:hover{
  background:rgba(220,53,69,.08);
  box-shadow:0 0 0 3px rgba(220,53,69,.12);
}
.edit-button:active,
.delete-button:active{transform:translateY(1px)}

/* Role badges */
.role-badge{
  padding:4px 10px;
  border-radius:999px;
  font-size:11px;
  font-weight:800;
  text-transform:uppercase;
  color:#fff;
  display:inline-block;
  min-width:110px;
  text-align:center;
}
.role-badge.role-super_admin{background:linear-gradient(135deg,#ff6b6b 0%,#ee5a24 100%)}
.role-badge.role-admin{background:linear-gradient(135deg,#fd79a8 0%,#e84393 100%)}
.role-badge.role-responsabile_territoriale{background:linear-gradient(135deg,#fdcb6e 0%,#e17055 100%)}
.role-badge.role-sportello_lavoro{background:linear-gradient(135deg,#74b9ff 0%,#0984e3 100%)}
.role-badge.role-segnalatori{background:linear-gradient(135deg,#55a3ff 0%,#003d82 100%)}

/* Status chips */
.status{
  padding:4px 10px;
  border-radius:999px;
  font-size:11px;
  font-weight:800;
  display:inline-block;
}
.status.active{
  background:#d4edda;
  color:var(--success-ink);
  border:1px solid #c3e6cb;
}
.status.inactive{
  background:#f8d7da;
  color:#721c24;
  border:1px solid #f5c6cb;
}

/* Approval statuses */
.approval-status{
  font-size:12px;
  font-weight:700;
  border-radius:999px;
  padding:4px 10px;
  display:inline-block;
  min-width:80px;
  text-align:center;
}
.approval-status.approved{
  background:#d4edda;color:var(--success-ink);border:1px solid #c3e6cb;
}
.approval-status.pending{
  background:#fff3cd;color:var(--warn-ink);border:1px solid #ffeaa7;
}
.approval-status.auto{
  background:#d1ecf1;color:#0c5460;border:1px solid #bee5eb;
}
.approved-by{
  display:block;
  font-size:10px;
  font-weight:400;
  color:#6c757d;
  margin-top:2px;
}

/* Pending table */
.pending-users-list{margin-top:16px}
.pending-header{
  background:#f8f9fa;
  border-left:4px solid var(--warn);
  border-radius:10px;
  padding:16px 18px;
  margin-bottom:14px;
  box-shadow:var(--shadow-sm);
}
.pending-header h3{
  margin:0 0 6px 0;
  color:var(--ink-900);
  font-size:20px;
}
.pending-header p{
  margin:0;color:var(--ink-600);font-size:14px
}
.pending-table{
  background:#fffbf0;
  border:1px solid #ffeaa7;
}

/* Approve / Reject buttons */
.approve-button,
.reject-button{
  border:none;
  padding:8px 12px;
  border-radius:8px;
  font-size:12px;
  font-weight:800;
  cursor:pointer;
  transition:transform .06s, box-shadow .2s, background .2s;
}
.approve-button{background:var(--success);color:#fff}
.approve-button:hover{background:#218838;box-shadow:0 0 0 3px rgba(40,167,69,.16)}
.reject-button{background:var(--danger);color:#fff}
.reject-button:hover{background:var(--danger-700);box-shadow:0 0 0 3px rgba(220,53,69,.16)}
.approve-button:active,.reject-button:active{transform:translateY(1px)}

/* Create form card */
.create-user-form{
  background:#fff;
  padding:24px;
  border-radius:12px;
  box-shadow:var(--shadow-sm);
  border:1px solid var(--muted-200);
}
.create-user-form .form-grid .form-group {
  padding: 0;
}

.create-user-form h2{
  margin:0 0 18px 0;
  font-size:22px;
  color:var(--ink-900);
}

/* Grid form */
.form-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(280px,1fr));
  gap:16px;
}
.form-group{margin-bottom:0}
.form-group label{
  display:block;margin-bottom:6px;
  font-weight:700;color:var(--ink-700);font-size:13px
}
.form-group input,
.form-group select{
  width:100%;
  padding:10px 12px;
  border:1px solid var(--muted-200);
  border-radius:8px;
  font-size:14px;
  transition:border-color .2s, box-shadow .2s;
}
.form-group input:focus,
.form-group select:focus{
  border-color:var(--brand-500);
  outline:none;
  box-shadow:0 0 0 3px rgba(18,133,106,.12);
}

/* Help text */
.help-text{
  display:block;
  font-size:12px;
  color:#6c757d;
  margin-top:6px;
  line-height:1.35;
  font-style:italic;
}

/* Role restriction notice */
.role-restriction-notice{
  background:#fff3cd;
  border:1px solid #ffeaa7;
  border-radius:10px;
  padding:16px 18px;
  margin-bottom:18px;
  color:var(--warn-ink);
}
.role-restriction-notice h4{
  margin:0 0 10px 0;
  font-size:16px;
  font-weight:800;
}
.role-restriction-notice ul{margin:0;padding-left:18px}
.role-restriction-notice li{margin-bottom:4px;font-size:14px}

/* Form actions */
.form-actions{
  margin-top:20px;
  display:flex;
  justify-content:flex-end;
  gap:12px;
}
.cancel-button,
.submit-button{
  padding:10px 16px;
  border-radius:10px;
  font-size:14px;
  font-weight:800;
  cursor:pointer;
  transition:background .2s, box-shadow .2s, transform .06s;
}
.cancel-button{
  background:#f8f9fa;
  border:1px solid var(--muted-200);
  color:var(--ink-700);
}
.cancel-button:hover{
  background:#f1f5f9;
  box-shadow:0 0 0 3px rgba(107,114,128,.12)
}
.submit-button{
  background:var(--brand-700);
  border:none;color:#fff;
}
.submit-button:hover{
  background:var(--brand-600);
  box-shadow:0 0 0 3px rgba(0,106,78,.16)
}
.submit-button:disabled{
  background:#9bbab2;cursor:not-allowed;box-shadow:none
}

/* Messages */
.loading,.error,.no-results{
  padding:20px;
  text-align:center;
  color:var(--ink-600);
}
.error{color:var(--danger)}
.form-error{
  background:#f8d7da;
  border:1px solid #f5c6cb;
  color:#721c24;
  padding:12px 16px;
  border-radius:10px;
  margin-bottom:18px;
  font-size:14px;
  font-weight:700;
}
/* === Users create form field fix === */

/* Force a stable grid: 3 cols desktop, 2 tablet, 1 mobile */
.form-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 16px 20px;               /* row/column gap */
  grid-auto-flow: row dense;    /* pack items, avoid holes/wrapping weirdness */
}

/* Responsiveness */
@media (max-width: 1024px){
  .form-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 640px){
  .form-grid{ grid-template-columns: 1fr; }
}

/* Make groups consistent */
.form-group{
  display:flex;
  flex-direction:column;
  min-width: 0; /* prevents overflow when labels are long */
}

/* Uniform field height + look */
.form-group input,
.form-group select,
.form-group textarea{
  width: 100%;
  height: 44px;               /* same height everywhere */
  padding: 10px 12px;
  border: 1px solid var(--muted-200, #e5e7eb);
  border-radius: 8px;
  font-size: 14px;
  background: #fff;
  transition: border-color .2s, box-shadow .2s;
  box-sizing: border-box;
}

/* Textarea taller but still matches style */
.form-group textarea{
  height: auto;
  min-height: 100px;
  resize: vertical;
}

/* Focus ring */
.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus{
  border-color: var(--brand-500, #12856a);
  outline: none;
  box-shadow: 0 0 0 3px rgba(18,133,106,.12);
}

/* Chrome/Safari autofill fix (kills the blue/yellow bg) */
.form-group input:-webkit-autofill,
.form-group input:-webkit-autofill:hover,
.form-group input:-webkit-autofill:focus{
  -webkit-box-shadow: 0 0 0 1000px #ffffff inset !important;
  -webkit-text-fill-color: #1f2937 !important; /* ink-900 */
  caret-color: #1f2937;
  transition: background-color 5000s ease-in-out 0s; /* suppress flash */
}

/* Make the role help text not push layout awkwardly */
.help-text{
  margin-top: 6px;
  line-height: 1.35;
}

.form-group.span-2{ grid-column: span 2; }


/* Column widths for actions/approval */
.users-table th:nth-child(7),
.users-table td:nth-child(7){text-align:center;width:130px}
.users-table th:nth-child(8),
.users-table td:nth-child(8){text-align:center;width:110px}

/* Responsive */

@media (max-width:1200px){
  .users-table th:nth-child(5),
  .users-table td:nth-child(5),
  .users-table th:nth-child(7),
  .users-table td:nth-child(7){display:none}
}
@media (max-width:768px){
  .page-header{flex-direction:column;align-items:flex-start;gap:8px}
  .users-table th:nth-child(2),
  .users-table td:nth-child(2),
  .users-table th:nth-child(4),
  .users-table td:nth-child(4){display:none}
  .approval-status{font-size:10px;padding:2px 6px;min-width:54px}
  .approve-button,.reject-button{padding:6px 10px;font-size:11px}
}

/* ========= Minimal Table Variant ========= */
:root{
  --tbl-bg:#fff;
  --tbl-ink:#1f2937;
  --tbl-muted:#6b7280;
  --tbl-line:#e5e7eb;
  --tbl-head:#f8fafc;
  --tbl-hover:#f6f7f9;
  --pill-bg:#eef2f7;
  --pill-ink:#334155;
  --accent:#0ea5e9; /* used for focus/hover rings */
}

/* reset/normalize for this variant */
.users-table.users-table--minimal{
  background: var(--tbl-bg);
  border-collapse: separate;
  border-spacing: 0;
  width: 100%;
  font-size: 13px;
  color: var(--tbl-ink);
  border: 1px solid var(--tbl-line);
  border-radius: 10px;
  overflow: hidden;
}

/* header */
.users-table.users-table--minimal thead th{
  background: var(--tbl-head);
  color: var(--tbl-muted);
  font-weight: 700;
  text-transform: none;
  letter-spacing: 0;
  font-size: 12px;
  padding: 10px 12px;
  border-bottom: 1px solid var(--tbl-line);
  position: sticky;
  top: 0;
  z-index: 1;
}

/* cells */
.users-table.users-table--minimal td{
  padding: 10px 12px;
  border-bottom: 1px solid var(--tbl-line);
  vertical-align: middle;
}

/* zebra rows */
.users-table.users-table--minimal tbody tr:nth-child(odd){
  background: #fcfcfd;
}
.users-table.users-table--minimal tbody tr:hover{
  background: var(--tbl-hover);
}

/* compact density option */
.users-table--compact thead th,
.users-table--compact td{
  padding: 8px 10px !important;
  line-height: 1.25;
}

/* tighter actions (outline, subtle) */
.users-table.users-table--minimal .actions{
  gap: 6px;
  justify-content: center;
}
.users-table.users-table--minimal .edit-button,
.users-table.users-table--minimal .delete-button{
  width: 30px; height: 30px;
  border-radius: 6px;
  border: 1px solid var(--tbl-line);
  background: #fff;
  box-shadow: none;
}
.users-table.users-table--minimal .edit-button:hover,
.users-table.users-table--minimal .delete-button:hover{
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(14,165,233,.15);
  background: #fff;
}

/* small flat pills for role/status/approval */
.users-table.users-table--minimal .role-badge,
.users-table.users-table--minimal .status,
.users-table.users-table--minimal .approval-status{
  background: var(--pill-bg) !important;
  color: var(--pill-ink) !important;
  border: 1px solid var(--tbl-line) !important;
  border-radius: 999px !important;
  padding: 2px 8px !important;
  font-size: 11px !important;
  font-weight: 700 !important;
  min-width: 0 !important;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

/* small colored dot instead of big gradients */
.users-table.users-table--minimal .role-badge::before{
  content:"";
  width:8px; height:8px; border-radius:50%;
  background:#94a3b8; /* default */
  display:inline-block;
}
.role-badge.role-super_admin::before{ background:#ef4444; }
.role-badge.role-admin::before{ background:#f43f5e; }
.role-badge.role-responsabile_territoriale::before{ background:#f59e0b; }
.role-badge.role-sportello_lavoro::before{ background:#22c55e; }
.role-badge.role-segnalatori::before{ background:#3b82f6; }

/* status colors (tiny dot) */
.users-table.users-table--minimal .status::before{
  content:"";
  width:8px; height:8px; border-radius:50%;
  background:#16a34a; margin-right:6px;
}
.users-table.users-table--minimal .status.inactive::before{
  background:#dc2626;
}

/* approval variants */
.users-table.users-table--minimal .approval-status.approved::before{
  content:""; width:8px; height:8px; border-radius:50%; background:#16a34a; margin-right:6px;
}
.users-table.users-table--minimal .approval-status.pending::before{
  content:""; width:8px; height:8px; border-radius:50%; background:#f59e0b; margin-right:6px;
}
.users-table.users-table--minimal .approval-status.auto::before{
  content:""; width:8px; height:8px; border-radius:50%; background:#38bdf8; margin-right:6px;
}

/* column widths (keep tidy) */
.users-table.users-table--minimal th:nth-child(1){ width: 190px; }
.users-table.users-table--minimal th:nth-child(5){ width: 120px; text-align:right; }
.users-table.users-table--minimal td:nth-child(5){ text-align:right; }
.users-table.users-table--minimal th:nth-child(7){ width: 120px; text-align:center; }
.users-table.users-table--minimal td:nth-child(7){ text-align:center; }
.users-table.users-table--minimal th:nth-child(8){ width: 108px; text-align:center; }
.users-table.users-table--minimal td:nth-child(8){ text-align:center; }

/* scroll wrapper look */
.table-scroll{
  max-height: 70vh;
  overflow: auto;
  border-radius: 12px;
  background: transparent;
  border: none;
  box-shadow: none;
}

/* responsive: hide low-priority cols */
@media (max-width: 1200px){
  .users-table.users-table--minimal th:nth-child(5),
  .users-table.users-table--minimal td:nth-child(5),
  .users-table.users-table--minimal th:nth-child(7),
  .users-table.users-table--minimal td:nth-child(7){ display:none; }
}
@media (max-width: 768px){
  .users-table.users-table--minimal th:nth-child(2),
  .users-table.users-table--minimal td:nth-child(2),
  .users-table.users-table--minimal th:nth-child(4),
  .users-table.users-table--minimal td:nth-child(4){ display:none; }
}
